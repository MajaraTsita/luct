{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Documents\\\\limkokwings\\\\frontend\\\\src\\\\pages\\\\ReportsList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport API, { setAuth } from '../services/api';\nimport { Link } from 'react-router-dom'; // ðŸ‘ˆ added for navigation\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ReportsList() {\n  _s();\n  const [reports, setReports] = useState([]);\n  const [q, setQ] = useState('');\n  useEffect(() => {\n    const t = localStorage.getItem('token');\n    if (t) setAuth(t);\n    fetchReports();\n  }, []);\n  async function fetchReports() {\n    try {\n      const res = await API.get('/reports' + (q ? '?q=' + encodeURIComponent(q) : ''));\n      setReports(res.data);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      alert(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message);\n    }\n  }\n  async function download() {\n    try {\n      const res = await API.get('/reports/export/xlsx', {\n        responseType: 'blob'\n      });\n      const url = window.URL.createObjectURL(new Blob([res.data]));\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'reports.xlsx';\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n    } catch (err) {\n      alert(err.message);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Reports\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-2 d-flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"form-control me-2\",\n        value: q,\n        onChange: e => setQ(e.target.value),\n        placeholder: \"Search by faculty, class, course...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-outline-primary me-2\",\n        onClick: fetchReports,\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-success\",\n        onClick: download,\n        children: \"Download Excel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: reports.map(r => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card mb-2\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"card-title\",\n              children: [r.courseName, \" (\", r.courseCode, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 35,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"card-subtitle mb-2 text-muted\",\n              children: [r.facultyName, \" - \", r.className]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 36,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Lecturer:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 37,\n                columnNumber: 20\n              }, this), \" \", r.lecturerName, \" | \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Date:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 37,\n                columnNumber: 66\n              }, this), \" \", r.dateOfLecture]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 37,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Present:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 38,\n                columnNumber: 20\n              }, this), \" \", r.actualStudentsPresent, \" / \", r.totalRegisteredStudents]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 38,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Topic:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 39,\n                columnNumber: 20\n              }, this), \" \", r.topicTaught]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 39,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Feedback:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 40,\n                columnNumber: 20\n              }, this), \" \", r.feedback || 'â€”']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Status:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 41,\n                columnNumber: 20\n              }, this), \" \", r.status]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 17\n            }, this), localStorage.getItem('role') === 'PRL' && /*#__PURE__*/_jsxDEV(Link, {\n              to: `/reports/${r.id}/review`,\n              className: \"btn btn-sm btn-primary me-2\",\n              children: \"Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 45,\n              columnNumber: 19\n            }, this), localStorage.getItem('role') === 'PL' && r.status === 'REVIEWED_BY_PRL' && /*#__PURE__*/_jsxDEV(Link, {\n              to: `/reports/${r.id}/finalize`,\n              className: \"btn btn-sm btn-success\",\n              children: \"Finalize\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 13\n        }, this)\n      }, r.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 5\n  }, this);\n}\n_s(ReportsList, \"KdRT6yWC/CZeGuBCRDFwwozFHJU=\");\n_c = ReportsList;\nvar _c;\n$RefreshReg$(_c, \"ReportsList\");","map":{"version":3,"names":["React","useEffect","useState","API","setAuth","Link","jsxDEV","_jsxDEV","ReportsList","_s","reports","setReports","q","setQ","t","localStorage","getItem","fetchReports","res","get","encodeURIComponent","data","err","_err$response","_err$response$data","alert","response","error","message","download","responseType","url","window","URL","createObjectURL","Blob","a","document","createElement","href","body","appendChild","click","remove","children","fileName","_jsxFileName","lineNumber","columnNumber","className","value","onChange","e","target","placeholder","onClick","map","r","courseName","courseCode","facultyName","lecturerName","dateOfLecture","actualStudentsPresent","totalRegisteredStudents","topicTaught","feedback","status","to","id","_c","$RefreshReg$"],"sources":["C:/Users/Administrator/Documents/limkokwings/frontend/src/pages/ReportsList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport API, { setAuth } from '../services/api';\nimport { Link } from 'react-router-dom';   // ðŸ‘ˆ added for navigation\n\nexport default function ReportsList(){\n  const [reports,setReports]=useState([]);\n  const [q,setQ]=useState('');\n  useEffect(()=>{ const t = localStorage.getItem('token'); if(t) setAuth(t); fetchReports(); },[]);\n  async function fetchReports(){\n    try{\n      const res = await API.get('/reports'+(q?('?q='+encodeURIComponent(q)):'')); \n      setReports(res.data);\n    }catch(err){ alert(err.response?.data?.error || err.message); }\n  }\n  async function download(){\n    try{\n      const res = await API.get('/reports/export/xlsx', { responseType:'blob' });\n      const url = window.URL.createObjectURL(new Blob([res.data]));\n      const a = document.createElement('a'); a.href = url; a.download = 'reports.xlsx'; document.body.appendChild(a); a.click(); a.remove();\n    }catch(err){ alert(err.message); }\n  }\n  return (\n    <div>\n      <h3>Reports</h3>\n      <div className=\"mb-2 d-flex\">\n        <input className=\"form-control me-2\" value={q} onChange={e=>setQ(e.target.value)} placeholder=\"Search by faculty, class, course...\" />\n        <button className=\"btn btn-outline-primary me-2\" onClick={fetchReports}>Search</button>\n        <button className=\"btn btn-success\" onClick={download}>Download Excel</button>\n      </div>\n      <div className=\"row\">\n        {reports.map(r=>(\n          <div className=\"col-md-6\" key={r.id}>\n            <div className=\"card mb-2\">\n              <div className=\"card-body\">\n                <h5 className=\"card-title\">{r.courseName} ({r.courseCode})</h5>\n                <h6 className=\"card-subtitle mb-2 text-muted\">{r.facultyName} - {r.className}</h6>\n                <p><strong>Lecturer:</strong> {r.lecturerName} | <strong>Date:</strong> {r.dateOfLecture}</p>\n                <p><strong>Present:</strong> {r.actualStudentsPresent} / {r.totalRegisteredStudents}</p>\n                <p><strong>Topic:</strong> {r.topicTaught}</p>\n                <p><strong>Feedback:</strong> {r.feedback || 'â€”'}</p>\n                <p><strong>Status:</strong> {r.status}</p>\n\n                {/* ðŸ‘‡ Added Review / Finalize buttons */}\n                {localStorage.getItem('role') === 'PRL' && (\n                  <Link to={`/reports/${r.id}/review`} className=\"btn btn-sm btn-primary me-2\">Review</Link>\n                )}\n                {localStorage.getItem('role') === 'PL' && r.status === 'REVIEWED_BY_PRL' && (\n                  <Link to={`/reports/${r.id}/finalize`} className=\"btn btn-sm btn-success\">Finalize</Link>\n                )}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}